<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Jackpot Therapy – End Scene</title>
  <style>
    body {
      background: url("end_scene.jpeg") no-repeat;
      background-size: cover;
      font-family: "Poppins", sans-serif;
      color: #efe9ff;
      text-align: center;
      margin: 0;
      padding-top: 80px;
      height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      overflow: hidden;
      transition: opacity 1s ease;
    }

    h1 {
      font-size: 2.4rem;
      margin-bottom: 10px;
      color: #d8c5ff;
    }

    .summary-box {
      background: rgba(255,255,255,0.1);
      border: 1px solid rgba(255,255,255,0.2);
      border-radius: 15px;
      padding: 25px 35px;
      box-shadow: 0 4px 20px rgba(100,80,160,0.3);
      width: 340px;
      backdrop-filter: blur(6px);
      margin-top: 15px;
    }

    .summary-box p {
      margin: 10px 0;
      font-size: 1rem;
    }

    .button-container {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-top: 30px;
    }

    button {
      padding: 12px 28px;
      border: none;
      border-radius: 10px;
      font-size: 1rem;
      font-weight: bold;
      color: white;
      cursor: pointer;
      transition: background 0.3s, transform 0.2s;
    }

    #replayBtn {
      background-color: #a77ef5;
    }
    #replayBtn:hover {
      background-color: #9468f0;
      transform: scale(1.05);
    }

    #quitBtn {
      background-color: #6e5fd9;
      animation: pulseBlue 2.5s infinite ease-in-out;
    }
    #quitBtn:hover {
      transform: scale(1.05);
    }

    @keyframes pulseBlue {
      0%, 100% { box-shadow: 0 0 10px rgba(120,150,255,0.5); }
      50% { box-shadow: 0 0 25px rgba(120,150,255,1); }
    }

    /* CREDITS */
    #creditsContainer {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(28,18,51,0.8);
      display: none;
      justify-content: center;
      align-items: center;
      overflow: hidden;
      text-align: center;
      z-index: 10;
    }

    #credits {
      position: absolute;
      bottom: -100%;
      animation: rollCredits 30s linear forwards;
      width: 100%;
      color: #e9e1fb;
    }

    @keyframes rollCredits {
      from { bottom: -100%; }
      to { bottom: 100%; }
    }

    #credits h2 {
      color: #d6c8f9;
      margin-bottom: 10px;
      font-size: 2rem;
    }

    #credits p {
      font-size: 1rem;
      margin: 5px 0;
    }

  </style>
</head>
<body>
  <div id="mainContent">
    <h1>Jackpot Therapy</h1>
    <h2>Session Summary</h2>

    <div class="summary-box">
      <p><strong>Player:</strong> <span id="endName"></span></p>
      <p><strong>Final Balance:</strong> $<span id="endBalance"></span></p>
      <p><strong>Total Debt:</strong> $<span id="endDebt"></span></p>
      <p><strong>Time Played:</strong> <span id="endTime"></span></p>
    </div>

    <div class="button-container">
      <button id="replayBtn">Replay</button>
      <button id="quitBtn">Quit Game</button>
    </div>
  </div>

  <!-- Hidden Credits Container -->
  <div id="creditsContainer">
    <div id="credits">
      <h2>Jackpot Therapy</h2>
      <p>Created by Sheetal Shekar</p>
      <p>Concept Design – </p>
      <p>Lead Developer – </p>
      <p>UI/UX Design – </p>
      <p>Story & Game Flow – </p>
      <p>Art Direction – </p>
      <p>Music & Sound – </p>
      <p>Testing & QA – </p>
      <p>Special Thanks – You, the player</p>
      <p>Powered by HTML, CSS & JavaScript</p>
      <br><br>
      <p>Thank you for playing</p>
    </div>
  </div>

  <script>
    // Load profile data
    const profile = JSON.parse(localStorage.getItem("playerProfile") || "{}");
    document.getElementById("endName").innerText = profile.name || "Unknown";
    document.getElementById("endBalance").innerText = profile.balance ?? 0;
    document.getElementById("endDebt").innerText = profile.totalDebt ?? 0;
    document.getElementById("endTime").innerText = profile.timePlayed || "--:--";

    // Replay button → Go back to main screen
    document.getElementById("replayBtn").addEventListener("click", () => {
      window.location.href = "index.html";
    });

    // Quit button → Show rolling credits
    document.getElementById("quitBtn").addEventListener("click", () => {
      document.getElementById("mainContent").style.display = "none";
      const creditsContainer = document.getElementById("creditsContainer");
      creditsContainer.style.display = "flex";

      const credits = document.getElementById("credits");
      credits.style.animation = "rollCredits 30s linear forwards";

      // Clear player profile
      localStorage.removeItem("playerProfile");

      // After credits end (30s + a small delay)
      setTimeout(() => {
        // Fade out credits
        creditsContainer.style.transition = "opacity 2s ease";
        creditsContainer.style.opacity = "0";

        // After fade, show thank-you message
        setTimeout(() => {
          creditsContainer.innerHTML = `
            <h1 style="color:#d8c5ff; font-size:2.5rem;">Thank you for playing</h1>
          `;
          creditsContainer.style.opacity = "1";
        }, 2000);
      }, 32000); // 30s animation + 2s buffer
    });
  </script>
</body>
</html>
